{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios'\n\n\nexport async function ImageSearch(source, options) {\n\t\n\tconst response = await axios.get(`${source}${options}`)\n\treturn response.data;\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\n\nexport function renderGallery(images) {\n    let galleryHTML = \"\";\n    images.forEach((element) => {\n        galleryHTML += `\n            <li class=\"gallery_item\">\n                <a class=\"gallery_link\" href=\"${element.largeImageURL}\" title=\"${element.tags}\">\n                    <img\n                        class=\"gallery-image\"\n                        src=\"${element.webformatURL}\"\n                        alt=\"${element.tags}\"\n                    />\n                </a>\n                <ul class=\"gallery_info\">\n                    <li><span class=\"bold_text\">Likes</span><p class=\"text\">${element.likes}</p></li>\n                    <li><span class=\"bold_text\">Views</span><p class=\"text\">${element.views}</p></li>\n                    <li><span class=\"bold_text\">Comments</span><p class=\"text\">${element.comments}</p></li>\n                    <li><span class=\"bold_text\">Downloads</span><p class=\"text\">${element.downloads}</p></li>\n                </ul>\n            </li>\n        `;\n    });\n\n    gallery.insertAdjacentHTML('beforeend', galleryHTML);\n    \n    const lightbox = new SimpleLightbox('.gallery a', {\n        nav: true,\n        overlay: true,\n        captions: true,\n        captionSelector: 'self',\n        captionType: 'attr',\n        captionData: 'title',\n        captionPosition: 'bottom',\n        captionDelay: 250\n    });\n    \n    lightbox.refresh();\n}","import { ImageSearch } from './js/pixabay-api.js';\nimport { renderGallery } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// DOM Elements\nconst { form, search, loader, loadButton, gallery } = querySelectors({\n\tform: 'form',\n\tsearch: '.search_bar',\n\tloader: '.loader',\n\tloadButton: '.load',\n\tgallery: '.gallery',\n});\n\n// API Configuration\nconst config = {\n\tsource: 'https://pixabay.com/api/?',\n\toptions: new URLSearchParams({\n\t\tkey: '46749030-b6cef6a6b69e043ecf4444c1b',\n\t\timage_type: 'photo',\n\t\torientation: 'horizontal',\n\t\tper_page: 12,\n\t}),\n};\n\n// Messages\nconst messages = {\n\tnoMatchError:\n\t\t'Sorry, there are no images matching your search query. Please try again!',\n\tcollectionEndMessage:\n\t\t\"We're sorry, but you've reached the end of search results.\",\n};\n\n// Global Variables\nlet page;\n\n// Event Listeners\nform.addEventListener('submit', handleFormSubmit);\nloadButton.addEventListener('click', handleLoadMore);\n\n// Main Functions\nfunction handleFormSubmit(event) {\n\tevent.preventDefault();\n\tconst searchValue = getSearchValue();\n\tif (!searchValue) return;\n\n\tshowLoadBtn(false);\n\tresetGallery();\n\tshowLoader(true);\n\tinitializeSearch(searchValue);\n}\n\nfunction initializeSearch(searchValue) {\n\tconfig.options.set('page', page);\n\tconfig.options.set('q', searchValue);\n\tperformSearch();\n}\n\nfunction handleLoadMore() {\n\tshowLoader(true);\n\tincrementPage();\n\tperformSearch();\n\tsetTimeout(scrollToNextImages, 800);\n}\n\nfunction performSearch() {\n\tImageSearch(config.source, config.options)\n\t\t.then(posts => handleImageSearch(posts))\n\t\t.catch(error => {\n\t\t\tconsole.error('API Error:', error);\n\t\t\traiseError(\n\t\t\t\terror.message || 'An unexpected error occurred. Please try again.'\n\t\t\t);\n\t\t})\n\t\t.finally(() => {\n\t\t\tshowLoader(false);\n\t\t\tresetSearch();\n\t\t});\n}\n\n// Smooth Scroll Function\nfunction scrollToNextImages() {\n\tconst galleryCard = document.querySelector('.gallery .gallery_item');\n\tif (galleryCard) {\n\t\tconst cardHeight = galleryCard.getBoundingClientRect().height;\n\t\twindow.scrollBy({\n\t\t\ttop: cardHeight * 2 + 20,\n\t\t\tleft: 0,\n\t\t\tbehavior: 'smooth',\n\t\t});\n\t}\n}\n\n// Helper Functions\nfunction handleImageSearch(posts) {\n\tif (posts.total) {\n\t\trenderGallery(posts.hits);\n\t\tshowLoadBtn(true);\n\t\tcheckIfEndOfResults(posts.total);\n\t} else {\n\t\traiseError(messages.noMatchError);\n\t}\n}\n\nfunction checkIfEndOfResults(totalResults) {\n\tconst currentItemsCount =\n\t\tparseInt(config.options.get('per_page')) *\n\t\tparseInt(config.options.get('page'));\n\tif (currentItemsCount > totalResults) {\n\t\thideLoadButton();\n\t\traiseInfo(messages.collectionEndMessage);\n\t}\n}\n\nfunction getSearchValue() {\n\treturn search.value.trim();\n}\n\nfunction resetGallery() {\n\tpage = 1;\n\tgallery.innerHTML = '';\n}\n\nfunction resetSearch() {\n\tsearch.value = '';\n}\n\nfunction showLoader(isVisible) {\n\tloader.style.display = isVisible ? 'block' : 'none';\n}\n\nfunction showLoadBtn(isVisible) {\n\tloadButton.style.display = isVisible ? 'block' : 'none';\n}\n\nfunction incrementPage() {\n\tconfig.options.set('page', ++page);\n}\n\nfunction hideLoadButton() {\n\tloadButton.style.display = 'none';\n}\n\n// Function to query DOM elements\nfunction querySelectors(selectors) {\n\tconst elements = {};\n\tObject.entries(selectors).forEach(([key, selector]) => {\n\t\telements[key] = document.querySelector(selector);\n\t});\n\treturn elements;\n}\n\n// Toast Notification Functions\nfunction raiseError(error) {\n\tiziToast.error({\n\t\tmessage: error,\n\t\tposition: 'topRight',\n\t\tcolor: 'red',\n\t\ttheme: 'dark',\n\t});\n}\n\nfunction raiseInfo(info) {\n\tiziToast.info({\n\t\tmessage: info,\n\t\tposition: 'topRight',\n\t\tcolor: 'blue',\n\t\ttheme: 'dark',\n\t});\n}"],"names":["ImageSearch","source","options","axios","gallery","renderGallery","images","galleryHTML","element","SimpleLightbox","form","search","loader","loadButton","querySelectors","config","messages","page","handleFormSubmit","handleLoadMore","event","searchValue","getSearchValue","showLoadBtn","resetGallery","showLoader","initializeSearch","performSearch","incrementPage","scrollToNextImages","posts","handleImageSearch","error","raiseError","resetSearch","galleryCard","cardHeight","checkIfEndOfResults","totalResults","hideLoadButton","raiseInfo","isVisible","selectors","elements","key","selector","iziToast","info"],"mappings":"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"}